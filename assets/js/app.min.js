"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}();window.addEventListener("load",function(){window.Event=new(function(){function e(){_classCallCheck(this,e),this.vue=new Vue}return _createClass(e,[{key:"fire",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.vue.$emit(e,t)}},{key:"listen",value:function(e,t){this.vue.$on(e,t)}}]),e}()),Vue.component("filters",{template:'\n            <div>\n                <ul class="nav navbar-nav" id="period">\n                    <li v-for="filter in filters" :class="{ \'is-active\' : filter.isActive }">\n                        <a :href="filter.href" @click="filterClick(filter.period)" :class="{ \'active\' : filter.isActive }">{{filter.title}}</a>\n                    </li>\n                </ul>\n                <slot></slot>\n            </div>\n        ',data:function(){return{filters:[]}},mounted:function(){},created:function(){this.filters=this.$children},methods:{filterClick:function(e){this.filters.forEach(function(t,i){t.isActive=t.period==e}),Event.fire("filterApplied",e)}}}),Vue.component("filter-item",{props:{period:{required:!0},selected:{default:!1}},mounted:function(){this.isActive=this.selected},data:function(){return{isActive:!1}},template:"<span></span>",computed:{activeClass:function(){var e="";return this.isActive&&(e="active"),e},title:function(){var e=this.period.replace(/\w\S*/g,function(e){return e.charAt(0).toUpperCase()+e.substr(1).toLowerCase()});return"today"!=this.period&&(e="This "+e),e},href:function(){return"#"+this.period}},methods:{filterClick:function(e){Event.fire("filterApplied",e)}}}),Vue.component("day",{template:'        <div>            <h2 class="u-textColor--black-light">{{ formattedDate }}</h2>            <ul class="c-list" style="list-style-type: disc;">                <daily-event v-for="event in items" v-bind:event="event"></daily-event>            </ul>        </div>      ',props:["items","date"],computed:{formattedDate:function(){return moment(this.date).format("MMMM DD, YYYY")}}}),Vue.component("daily-event",{template:'          <li class="c-list__item">            <a v-bind:href="event.url" target="_blank">{{ event.title }}</a>          </li>      ',props:["event"]});var e=new Vue({el:"#app",data:{eventsFromSource:trumpenings,eventItems:{},filteredEvents:{}},computed:{filteredEventCount:function(){return Object.keys(this.filteredEvents).length}},methods:{applyFilter:function(e){var t=moment(),i=t.year(),n=t.month(),r=t.date();switch(this.filteredEvents={},e){case"today":this.eventItems[i][n][r]&&(this.filteredEvents[t.format("MMMM DD, YYYY")]=this.eventItems[i][n][r].items);break;case"week":var s=moment(t).subtract(t.day(),"days"),a=s.year(),l=s.month(),o=s.date(),v=moment(s).add(6,"days"),f=v.year(),c=v.month(),d=v.date();for(var r in this.eventItems[a][l])if(r=parseInt(r),this.eventItems[a][l][r]){var u=this.eventItems[a][l][r],m=u.date;r>=o&&(r<=d||l!=c)&&(this.filteredEvents[m.format("MMMM DD, YYYY")]=u.items)}if(a!=f||l!=c)for(var r in this.eventItems[f][c])if(r=parseInt(r),this.eventItems[f][c][r]){var u=this.eventItems[f][c][r],m=u.date;r>=1&&(r<=d||l!=c)&&(this.filteredEvents[m.format("MMMM DD, YYYY")]=u.items)}break;case"month":if(this.eventItems[i][n])for(var r in this.eventItems[i][n]){r=parseInt(r);var u=this.eventItems[i][n][r],m=u.date;this.filteredEvents[m.format("MMMM DD, YYYY")]=u.items}break;case"year":if(this.eventItems[i])for(var h in this.eventItems[i]){var p=this.eventItems[i][h];for(var r in p){var u=this.eventItems[i][h][r],m=u.date;this.filteredEvents[m.format("MMMM DD, YYYY")]=u.items}}}}},created:function(){Event.listen("filterApplied",function(t){e.applyFilter(t)});var t=this.eventItems;for(var i in trumpenings){var n=moment(i),r=n.year(),s=n.month(),a=n.date();t[r]||(t[r]={});var l=t[r];l[s]||(l[s]={});var o=l[s];o[a]||(o[a]={});var v=(o[a],trumpenings[i]);t[r][s][a]={date:n,items:v}}this.applyFilter("today")}})});